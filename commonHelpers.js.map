{"version":3,"file":"commonHelpers.js","sources":["../src/cat-api.js","../src/index.js"],"sourcesContent":["const BASE_URL = 'https://api.thecatapi.com/v1';\nconst END_POINT_COLECTION = '/breeds';\nconst END_POINT_IMG = '/images/search';\nconst API_KEY =\n  'live_JBV67LISgv2ukmTbv0ljH9XRgowj3QdbFJmCIkpvj5kTitSzayNI1LDTecM7YPf7';\n\nconst params = new URLSearchParams({\n  api_key: API_KEY,\n  breed_ids: '',\n});\n\n// 'https://api.thecatapi.com/v1/breeds?api_key=live_JBV67LISgv2ukmTbv0ljH9XRgowj3QdbFJmCIkpvj5kTitSzayNI1LDTecM7YPf7'\n// `https://api.thecatapi.com/v1/images/search?breed_ids=${breedId}&api_key=live_JBV67LISgv2ukmTbv0ljH9XRgowj3QdbFJmCIkpvj5kTitSzayNI1LDTecM7YPf7`\n\nexport const fetchBreeds = function () {\n  return fetch(`${BASE_URL}${END_POINT_COLECTION}?${params.api_key}`).then(\n    response => {\n      if (!response.ok) {\n        throw new Error(response.statusText);\n      }\n      return response.json();\n    }\n  );\n};\n\nexport const fetchCatByBreed = function (breedId) {\n  return fetch(`${BASE_URL}${END_POINT_IMG}?${params}${breedId}`).then(\n    response => {\n      if (!response.ok) {\n        throw new Error(response.statusText);\n      }\n      return response.json();\n    }\n  );\n};\n","import axios from 'axios';\nimport { fetchBreeds } from './cat-api';\nimport { fetchCatByBreed } from './cat-api';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\n// axios.defaults.headers.common['x-api-key'] = 'live_JBV67LISgv2ukmTbv0ljH9XRgowj3QdbFJmCIkpvj5kTitSzayNI1LDTecM7YPf7';\n\nconst elements = {\n  select: document.querySelector('.breed-select'),\n  messageLoader: document.querySelector('.loader'),\n  messageError: document.querySelector('.error'),\n  catInfo: document.querySelector('.cat-info'),\n};\n\nelements.select.addEventListener('change', setBreed);\n\nelements.select.style.display = 'none';\nelements.messageError.style.display = 'none';\nelements.catInfo.style.display = 'none';\n\nfunction loading() {\n  fetchBreeds()\n    .then(data => {\n      elements.messageLoader.style.display = 'block';\n      makeOption(data);\n      elements.messageLoader.style.display = 'none';\n      elements.select.style.display = 'block';\n    })\n    .catch(\n      err => (\n        iziToast.error({\n          title: 'Error:',\n          message: `${elements.messageError.textContent}`,\n          position: 'topRight',\n        }),\n        (elements.messageLoader.style.display = 'none')\n      )\n    );\n}\nloading();\n\nfunction setDefault() {\n  return elements.select.insertAdjacentHTML(\n    'beforeend',\n    '<option value=\"\">Choose a breed</option>'\n  );\n}\nsetDefault();\n\nfunction makeOption(data) {\n  const option = data\n    .map(({ id, name }) => {\n      return `<option value=\"${id}\">${name}</option>`;\n    })\n    .join('');\n  elements.select.insertAdjacentHTML('beforeend', option);\n}\n\nfunction setBreed(event) {\n  elements.catInfo.style.display = 'none';\n  const selectedOptionValue = event.currentTarget.value;\n  fetchCatByBreed(selectedOptionValue)\n    .then(data => {\n      elements.messageLoader.style.display = 'block';\n      setTimeout(() => {\n        renderInfo(data);\n        elements.messageLoader.style.display = 'none';\n      }, 500);\n    })\n    .catch(\n      err => (\n        iziToast.error({\n          title: 'Error:',\n          message: `${elements.messageError.textContent}`,\n          position: 'topRight',\n        }),\n        (elements.messageLoader.style.display = 'none')\n      )\n    );\n}\n\nfunction renderInfo(arr) {\n  elements.catInfo.style.display = 'flex';\n\n  const card = arr\n    .map(({ url, breeds }) => {\n      return breeds.map(\n        ({ name, description, temperament }) =>\n          `<img src=\"${url}\" alt=\"${name}\" width=\"600\"/>\n      <div class =\"cat-info-text\"><h2>${name}</h2>\n      <p>${description}</p>\n      <p><span>Temperament:</span> ${temperament}</p></div>`\n      );\n    })\n    .join('');\n  elements.catInfo.innerHTML = card;\n}\n"],"names":["BASE_URL","END_POINT_COLECTION","END_POINT_IMG","API_KEY","params","fetchBreeds","response","fetchCatByBreed","breedId","elements","setBreed","loading","data","makeOption","err","iziToast","setDefault","option","id","name","event","selectedOptionValue","renderInfo","arr","card","url","breeds","description","temperament"],"mappings":"svBAAA,MAAMA,EAAW,+BACXC,EAAsB,UACtBC,EAAgB,iBAChBC,EACJ,wEAEIC,EAAS,IAAI,gBAAgB,CACjC,QAASD,EACT,UAAW,EACb,CAAC,EAKYE,EAAc,UAAY,CACrC,OAAO,MAAM,GAAGL,IAAWC,KAAuBG,EAAO,SAAS,EAAE,KAClEE,GAAY,CACV,GAAI,CAACA,EAAS,GACZ,MAAM,IAAI,MAAMA,EAAS,UAAU,EAErC,OAAOA,EAAS,MACjB,CACL,CACA,EAEaC,EAAkB,SAAUC,EAAS,CAChD,OAAO,MAAM,GAAGR,IAAWE,KAAiBE,IAASI,GAAS,EAAE,KAC9DF,GAAY,CACV,GAAI,CAACA,EAAS,GACZ,MAAM,IAAI,MAAMA,EAAS,UAAU,EAErC,OAAOA,EAAS,MACjB,CACL,CACA,EC1BMG,EAAW,CACf,OAAQ,SAAS,cAAc,eAAe,EAC9C,cAAe,SAAS,cAAc,SAAS,EAC/C,aAAc,SAAS,cAAc,QAAQ,EAC7C,QAAS,SAAS,cAAc,WAAW,CAC7C,EAEAA,EAAS,OAAO,iBAAiB,SAAUC,CAAQ,EAEnDD,EAAS,OAAO,MAAM,QAAU,OAChCA,EAAS,aAAa,MAAM,QAAU,OACtCA,EAAS,QAAQ,MAAM,QAAU,OAEjC,SAASE,GAAU,CACjBN,EAAa,EACV,KAAKO,GAAQ,CACZH,EAAS,cAAc,MAAM,QAAU,QACvCI,EAAWD,CAAI,EACfH,EAAS,cAAc,MAAM,QAAU,OACvCA,EAAS,OAAO,MAAM,QAAU,OACtC,CAAK,EACA,MACCK,IACEC,EAAS,MAAM,CACb,MAAO,SACP,QAAS,GAAGN,EAAS,aAAa,cAClC,SAAU,UACpB,CAAS,EACAA,EAAS,cAAc,MAAM,QAAU,OAEhD,CACA,CACAE,IAEA,SAASK,GAAa,CACpB,OAAOP,EAAS,OAAO,mBACrB,YACA,0CACJ,CACA,CACAO,IAEA,SAASH,EAAWD,EAAM,CACxB,MAAMK,EAASL,EACZ,IAAI,CAAC,CAAE,GAAAM,EAAI,KAAAC,KACH,kBAAkBD,MAAOC,YACjC,EACA,KAAK,EAAE,EACVV,EAAS,OAAO,mBAAmB,YAAaQ,CAAM,CACxD,CAEA,SAASP,EAASU,EAAO,CACvBX,EAAS,QAAQ,MAAM,QAAU,OACjC,MAAMY,EAAsBD,EAAM,cAAc,MAChDb,EAAgBc,CAAmB,EAChC,KAAKT,GAAQ,CACZH,EAAS,cAAc,MAAM,QAAU,QACvC,WAAW,IAAM,CACfa,EAAWV,CAAI,EACfH,EAAS,cAAc,MAAM,QAAU,MACxC,EAAE,GAAG,CACZ,CAAK,EACA,MACCK,IACEC,EAAS,MAAM,CACb,MAAO,SACP,QAAS,GAAGN,EAAS,aAAa,cAClC,SAAU,UACpB,CAAS,EACAA,EAAS,cAAc,MAAM,QAAU,OAEhD,CACA,CAEA,SAASa,EAAWC,EAAK,CACvBd,EAAS,QAAQ,MAAM,QAAU,OAEjC,MAAMe,EAAOD,EACV,IAAI,CAAC,CAAE,IAAAE,EAAK,OAAAC,KACJA,EAAO,IACZ,CAAC,CAAE,KAAAP,EAAM,YAAAQ,EAAa,YAAAC,CAAa,IACjC,aAAaH,WAAaN;AAAA,wCACIA;AAAA,WAC7BQ;AAAA,qCAC0BC,aACrC,CACK,EACA,KAAK,EAAE,EACVnB,EAAS,QAAQ,UAAYe,CAC/B"}